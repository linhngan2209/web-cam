{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ADMIN/camera-web/src/data/videos.ts"],"sourcesContent":["import { CameraFeed } from \"@/model/videosModel\";\r\n\r\nexport const cameraFeeds: CameraFeed[] = [\r\n    { id: 1, name: 'Cam 1', isActive: true, timestamp: '4p:11', videoUrl: 'https://firebasestorage.googleapis.com/v0/b/furnite-2cf5f.appspot.com/o/images%2Fcam1.mp4?alt=media&token=b274993d-80b0-4c1e-b794-9f3d01f33bb9' },\r\n    { id: 2, name: 'Cam 2', isActive: true, timestamp: '4p:41', videoUrl: 'https://firebasestorage.googleapis.com/v0/b/furnite-2cf5f.appspot.com/o/images%2Fcam2.mp4?alt=media&token=663feeb5-a73c-4f48-a003-cdeba45bfa01' },\r\n    { id: 3, name: 'Cam 3', isActive: true, timestamp: '4p:23', videoUrl: 'https://firebasestorage.googleapis.com/v0/b/furnite-2cf5f.appspot.com/o/images%2Fcam3.mp4?alt=media&token=d8cc43c9-97e5-4cac-936f-0a3ada2be638' },\r\n    { id: 4, name: 'Cam 4', isActive: true, timestamp: '4p:31', videoUrl: 'https://firebasestorage.googleapis.com/v0/b/furnite-2cf5f.appspot.com/o/images%2Fcam4.mp4?alt=media&token=61e76333-2f1e-4497-a207-d01c92d4e3d8' },\r\n  ]"],"names":[],"mappings":";;;AAEO,MAAM,cAA4B;IACrC;QAAE,IAAI;QAAG,MAAM;QAAS,UAAU;QAAM,WAAW;QAAS,UAAU;IAAiJ;IACvN;QAAE,IAAI;QAAG,MAAM;QAAS,UAAU;QAAM,WAAW;QAAS,UAAU;IAAiJ;IACvN;QAAE,IAAI;QAAG,MAAM;QAAS,UAAU;QAAM,WAAW;QAAS,UAAU;IAAiJ;IACvN;QAAE,IAAI;QAAG,MAAM;QAAS,UAAU;QAAM,WAAW;QAAS,UAAU;IAAiJ;CACxN"}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ADMIN/camera-web/src/app/camera/%5BcameraName%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport LoadingComponent from '@/components/Loading';\r\nimport { cameraFeeds } from '@/data/videos';\r\nimport { CameraFeed } from '@/model/videosModel';\r\nimport axios from 'axios';\r\nimport { useParams } from 'next/navigation';\r\nimport { useState, useEffect, useCallback, useRef } from 'react';\r\nimport Hls from 'hls.js';\r\n\r\nconst CameraPage = () => {\r\n  const [camera, setCamera] = useState<CameraFeed | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const { cameraName } = useParams();\r\n  const [videoLink, setVideoLink] = useState('http://160.22.122.122:8080/hls/live.m3u8'); // Giữ URL mặc định nếu không có API\r\n\r\n  const videoRef = useRef<HTMLVideoElement | null>(null); // Tham chiếu đến phần tử video\r\n\r\n  const handleVideoLoad = useCallback(() => {\r\n    setIsPlaying(true);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (cameraName && typeof cameraName === 'string') {\r\n      const cameraId = parseInt(cameraName);\r\n      const camFind = cameraFeeds.find(cam => cam.id === cameraId);\r\n      setCamera(camFind || null);\r\n\r\n      const fetchData = async () => {\r\n        try {\r\n          const res = await axios.get(\"http://160.22.122.122:8080/hls/live.m3u8\");\r\n          setVideoLink(res.data); // Nếu cần, cập nhật videoLink từ API\r\n        } catch (error) {\r\n          console.error(\"Error fetching video stream:\", error);\r\n        }\r\n      };\r\n\r\n      fetchData();\r\n    }\r\n\r\n    setLoading(false);\r\n  }, [cameraName]);\r\n\r\n  useEffect(() => {\r\n    if (camera) {\r\n      setIsPlaying(false);\r\n    }\r\n  }, [camera]);\r\n\r\n  useEffect(() => {\r\n    if (videoRef.current && Hls.isSupported()) {\r\n      const hls = new Hls();\r\n      hls.loadSource(videoLink); // Tải nguồn video\r\n      hls.attachMedia(videoRef.current); // Gắn media với video element\r\n      hls.on(Hls.Events.MANIFEST_PARSED, () => {\r\n        console.log(\"HLS Manifest Loaded\");\r\n      });\r\n\r\n      return () => {\r\n        hls.destroy(); // Dọn dẹp khi component unmount\r\n      };\r\n    }\r\n  }, [videoLink]);\r\n\r\n  if (loading) {\r\n    return <LoadingComponent />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-4 bg-gray-900 text-white min-h-[90vh] rounded-xl shadow-lg\">\r\n      {videoLink ? (\r\n        <div className=\"relative w-full h-[70vh] rounded-lg overflow-hidden\">\r\n          <video\r\n            ref={videoRef}\r\n            controls\r\n            className=\"w-full h-full rounded-lg shadow-lg\"\r\n            onPlay={handleVideoLoad}\r\n          />\r\n        </div>\r\n      ) : (\r\n        <p className=\"text-center mt-4\">Không có video để hiển thị</p>\r\n      )}\r\n\r\n      {camera && (\r\n        <div className=\"mt-8\">\r\n          <h2 className=\"text-2xl font-semibold mb-2\">Thông tin chi tiết:</h2>\r\n          <p>Tên: {camera.name}</p>\r\n          <p>Thời lượng: {camera.timestamp}</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CameraPage;\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAGA;AACA;AACA;AAHA;;;AALA;;;;;;;AAUA,MAAM,aAAa;;IACjB,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAqB;IACxD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,EAAE,UAAU,EAAE,GAAG,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAC/B,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,6CAA6C,oCAAoC;IAE5H,MAAM,WAAW,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAA2B,OAAO,+BAA+B;IAEvF,MAAM,kBAAkB,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;mDAAE;YAClC,aAAa;QACf;kDAAG,EAAE;IAEL,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;gCAAE;YACR,IAAI,cAAc,OAAO,eAAe,UAAU;gBAChD,MAAM,WAAW,SAAS;gBAC1B,MAAM,UAAU,wHAAA,CAAA,cAAW,CAAC,IAAI;oDAAC,CAAA,MAAO,IAAI,EAAE,KAAK;;gBACnD,UAAU,WAAW;gBAErB,MAAM;sDAAY;wBAChB,IAAI;4BACF,MAAM,MAAM,MAAM,wIAAA,CAAA,UAAK,CAAC,GAAG,CAAC;4BAC5B,aAAa,IAAI,IAAI,GAAG,qCAAqC;wBAC/D,EAAE,OAAO,OAAO;4BACd,QAAQ,KAAK,CAAC,gCAAgC;wBAChD;oBACF;;gBAEA;YACF;YAEA,WAAW;QACb;+BAAG;QAAC;KAAW;IAEf,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;gCAAE;YACR,IAAI,QAAQ;gBACV,aAAa;YACf;QACF;+BAAG;QAAC;KAAO;IAEX,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;gCAAE;YACR,IAAI,SAAS,OAAO,IAAI,4IAAA,CAAA,UAAG,CAAC,WAAW,IAAI;gBACzC,MAAM,MAAM,IAAI,4IAAA,CAAA,UAAG;gBACnB,IAAI,UAAU,CAAC,YAAY,kBAAkB;gBAC7C,IAAI,WAAW,CAAC,SAAS,OAAO,GAAG,8BAA8B;gBACjE,IAAI,EAAE,CAAC,4IAAA,CAAA,UAAG,CAAC,MAAM,CAAC,eAAe;4CAAE;wBACjC,QAAQ,GAAG,CAAC;oBACd;;gBAEA;4CAAO;wBACL,IAAI,OAAO,IAAI,gCAAgC;oBACjD;;YACF;QACF;+BAAG;QAAC;KAAU;IAEd,IAAI,SAAS;QACX,qBAAO,6LAAC,gIAAA,CAAA,UAAgB;;;;;IAC1B;IAEA,qBACE,6LAAC;QAAI,WAAU;;YACZ,0BACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBACC,KAAK;oBACL,QAAQ;oBACR,WAAU;oBACV,QAAQ;;;;;;;;;;qCAIZ,6LAAC;gBAAE,WAAU;0BAAmB;;;;;;YAGjC,wBACC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAA8B;;;;;;kCAC5C,6LAAC;;4BAAE;4BAAM,OAAO,IAAI;;;;;;;kCACpB,6LAAC;;4BAAE;4BAAa,OAAO,SAAS;;;;;;;;;;;;;;;;;;;AAK1C;GAnFM;;QAImB,qIAAA,CAAA,YAAS;;;KAJ5B;uCAqFS"}},
    {"offset": {"line": 226, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}