{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ADMIN/camera-web/src/components/Loading.tsx"],"sourcesContent":["const Loading = () => {\r\n  return (\r\n    <div className=\"fixed inset-0 flex items-center justify-center bg-white bg-opacity-80\">\r\n      <div className=\"flex flex-col items-center\">\r\n        <div className=\"w-12 h-12 border-4 border-indigo-300 border-t-4 border-t-indigo-600 rounded-full animate-spin\"></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loading;"],"names":[],"mappings":";;;;;AAAA,MAAM,UAAU;IACd,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;;;;;;;;;;;;;;;AAIvB;uCAEe"}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ADMIN/camera-web/src/share/icon/menu.tsx"],"sourcesContent":["import React from 'react';\r\n\r\nconst MenuIcon = () => (\r\n    <svg width=\"25\" height=\"25\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"> <rect y=\"4\" width=\"24\" height=\"2\" fill=\"white\" /> <rect y=\"11\" width=\"24\" height=\"2\" fill=\"white\" /> <rect y=\"18\" width=\"24\" height=\"2\" fill=\"white\" /> </svg>\r\n);\r\n\r\nexport default MenuIcon;\r\n"],"names":[],"mappings":";;;;;AAEA,MAAM,WAAW,kBACb,8OAAC;QAAI,OAAM;QAAK,QAAO;QAAK,SAAQ;QAAY,MAAK;QAAO,OAAM;;YAA6B;0BAAC,8OAAC;gBAAK,GAAE;gBAAI,OAAM;gBAAK,QAAO;gBAAI,MAAK;;;;;;YAAU;0BAAC,8OAAC;gBAAK,GAAE;gBAAK,OAAM;gBAAK,QAAO;gBAAI,MAAK;;;;;;YAAU;0BAAC,8OAAC;gBAAK,GAAE;gBAAK,OAAM;gBAAK,QAAO;gBAAI,MAAK;;;;;;YAAU;;;;;;;uCAG5O"}},
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 101, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ADMIN/camera-web/src/components/Header.tsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { AiOutlineSearch } from \"react-icons/ai\";\r\nimport MenuIcon from \"@/share/icon/menu\";\r\nimport { useAuth } from \"@/contexts/AuthenticationContext\";\r\n\r\nconst Header = ({ toggleSidebar, isSmallScreen }: { toggleSidebar: () => void; isSmallScreen: boolean }) => {\r\n  const [language, setLanguage] = useState<\"en\" | \"jp\">(\"en\");\r\n  const [isMenuOpen, setMenuOpen] = useState(false);\r\n  const [isAvatarActive, setAvatarActive] = useState(false);\r\n  const { logout, getUser } = useAuth();\r\n\r\n  const user = getUser();\r\n  const toggleLanguage = () => {\r\n    setLanguage((prev) => (prev === \"en\" ? \"jp\" : \"en\"));\r\n  };\r\n\r\n  const toggleMenu = () => {\r\n    setMenuOpen((prev) => !prev);\r\n    setAvatarActive(true);\r\n    setTimeout(() => setAvatarActive(false), 300);\r\n  };\r\n\r\n  return (\r\n    <div className=\"absolute top-0 left-0 right-0 h-[70px] bg-white shadow-md flex justify-between items-center px-4 md:px-6 z-10\">\r\n      {isSmallScreen ? (\r\n        <div className=\"flex justify-between items-center w-full\">\r\n          <button\r\n            aria-label=\"Toggle Sidebar\"\r\n            className=\"text-gray-500 bg-gray-700 rounded-lg hover:bg-gray-400 p-2\"\r\n            onClick={toggleSidebar}\r\n          >\r\n            <MenuIcon />\r\n          </button>\r\n          <div className=\"flex-1 flex justify-center items-center\">\r\n            <img\r\n              src=\"/logo.png\"\r\n              alt=\"Logo\"\r\n              className=\"h-12 w-auto object-contain\"\r\n            />\r\n          </div>\r\n          <div className=\"relative\">\r\n            <div\r\n              className={`w-8 h-8 md:w-10 md:h-10 rounded-full overflow-hidden cursor-pointer transition-all duration-300 ${isAvatarActive ? 'scale-110' : ''\r\n                }`}\r\n              onClick={toggleMenu}\r\n            >\r\n              <img\r\n                src=\"/avt.png\"\r\n                alt=\"User\"\r\n                className=\"w-full h-full object-cover\"\r\n              />\r\n            </div>\r\n            {isMenuOpen && (\r\n              <div className=\"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-20\">\r\n                <div className=\"p-4 text-gray-700 font-semibold\">\r\n                  {user ? user.username : \"\"}\r\n                </div>\r\n                <div\r\n                  className=\"px-4 py-2 text-sm text-gray-500 hover:bg-gray-100 cursor-pointer\"\r\n                  onClick={() => logout()}\r\n                >\r\n                  Logout\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"flex items-center justify-between w-full\">\r\n          <div className=\"relative w-3/4 md:w-[330px]\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search...\"\r\n              className=\"w-full h-[35px] pl-10 p-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n            />\r\n            <AiOutlineSearch className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-xl text-gray-500 cursor-pointer hover:text-blue-500 transition-colors duration-300\" />\r\n          </div>\r\n          <div className=\"flex items-center space-x-4\">\r\n            <div className=\"flex items-center\">\r\n              <span className=\"text-sm text-gray-900 mr-2\">{language === \"en\" ? \"EN\" : \"JP\"}</span>\r\n              <div\r\n                className={`relative w-12 h-6 bg-gray-500 rounded-full cursor-pointer transition-colors ${language === \"jp\" ? \"bg-blue-400\" : \"bg-gray-500\"\r\n                  }`}\r\n                onClick={toggleLanguage}\r\n              >\r\n                <div\r\n                  className={`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow-md transform transition-transform ${language === \"jp\" ? \"translate-x-6\" : \"translate-x-0\"\r\n                    }`}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"relative\">\r\n              <div\r\n                className={`w-8 h-8 md:w-10 md:h-10 rounded-full overflow-hidden cursor-pointer transition-all duration-300 ${isAvatarActive ? 'scale-110' : ''\r\n                  }`}\r\n                onClick={toggleMenu}\r\n              >\r\n                <img\r\n                  src=\"/avt.png\"\r\n                  alt=\"User\"\r\n                  className=\"w-full h-full object-cover\"\r\n                />\r\n              </div>\r\n              {isMenuOpen && (\r\n                <div className=\"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-20\">\r\n                  <div className=\"p-4 text-gray-700 font-semibold\">\r\n                    {user ? user.username : \"\"}\r\n                  </div>\r\n                  <div\r\n                    className=\"px-4 py-2 text-sm text-gray-500 hover:bg-gray-100 cursor-pointer\"\r\n                    onClick={() => logout()}\r\n                  >\r\n                    Logout\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Header;"],"names":[],"mappings":";;;;AAAA;AAEA;AACA;AAFA;;;;;;AAIA,MAAM,SAAS,CAAC,EAAE,aAAa,EAAE,aAAa,EAAyD;IACrG,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IACtD,MAAM,CAAC,YAAY,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,gBAAgB,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnD,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,yIAAA,CAAA,UAAO,AAAD;IAElC,MAAM,OAAO;IACb,MAAM,iBAAiB;QACrB,YAAY,CAAC,OAAU,SAAS,OAAO,OAAO;IAChD;IAEA,MAAM,aAAa;QACjB,YAAY,CAAC,OAAS,CAAC;QACvB,gBAAgB;QAChB,WAAW,IAAM,gBAAgB,QAAQ;IAC3C;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACZ,8BACC,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBACC,cAAW;oBACX,WAAU;oBACV,SAAS;8BAET,cAAA,8OAAC,6HAAA,CAAA,UAAQ;;;;;;;;;;8BAEX,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBACC,KAAI;wBACJ,KAAI;wBACJ,WAAU;;;;;;;;;;;8BAGd,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,WAAW,CAAC,gGAAgG,EAAE,iBAAiB,cAAc,IACzI;4BACJ,SAAS;sCAET,cAAA,8OAAC;gCACC,KAAI;gCACJ,KAAI;gCACJ,WAAU;;;;;;;;;;;wBAGb,4BACC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CACZ,OAAO,KAAK,QAAQ,GAAG;;;;;;8CAE1B,8OAAC;oCACC,WAAU;oCACV,SAAS,IAAM;8CAChB;;;;;;;;;;;;;;;;;;;;;;;iCAQT,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,MAAK;4BACL,aAAY;4BACZ,WAAU;;;;;;sCAEZ,8OAAC,8IAAA,CAAA,kBAAe;4BAAC,WAAU;;;;;;;;;;;;8BAE7B,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAK,WAAU;8CAA8B,aAAa,OAAO,OAAO;;;;;;8CACzE,8OAAC;oCACC,WAAW,CAAC,4EAA4E,EAAE,aAAa,OAAO,gBAAgB,eAC1H;oCACJ,SAAS;8CAET,cAAA,8OAAC;wCACC,WAAW,CAAC,iGAAiG,EAAE,aAAa,OAAO,kBAAkB,iBACjJ;;;;;;;;;;;;;;;;;sCAIV,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,WAAW,CAAC,gGAAgG,EAAE,iBAAiB,cAAc,IACzI;oCACJ,SAAS;8CAET,cAAA,8OAAC;wCACC,KAAI;wCACJ,KAAI;wCACJ,WAAU;;;;;;;;;;;gCAGb,4BACC,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;sDACZ,OAAO,KAAK,QAAQ,GAAG;;;;;;sDAE1B,8OAAC;4CACC,WAAU;4CACV,SAAS,IAAM;sDAChB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWnB;uCAEe"}},
    {"offset": {"line": 354, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 360, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ADMIN/camera-web/src/hooks/useHardwareQuery.ts"],"sourcesContent":["import { useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport { useAuth } from '@/contexts/AuthenticationContext';\r\nimport axiosInstance from '@/services/apiClient';\r\n\r\ninterface Hardware {\r\n    id: string;\r\n    hardware_name: string;\r\n}\r\n\r\nconst fetchHardwares = async (): Promise<Hardware[]> => {\r\n    const response = await axiosInstance.get('/api/user/get-user-hardware', {\r\n        params: { limit: 10, page: 1 },\r\n        timeout: 10000,\r\n    });\r\n    return response.data.data || [];\r\n};\r\n\r\nexport const useHardwareQuery = (shouldRedirect = false) => {\r\n    const { isLoggedIn } = useAuth();\r\n    const queryClient = useQueryClient();\r\n\r\n    const query = useQuery({\r\n        queryKey: ['hardwares'],\r\n        queryFn: fetchHardwares,\r\n        enabled: !!isLoggedIn, \r\n    });\r\n\r\n    const refreshHardwares = () => {\r\n        queryClient.invalidateQueries({ queryKey: ['hardwares'] });\r\n    };\r\n\r\n    return {\r\n        ...query,\r\n        hardwares: query.data || [],\r\n        refreshHardwares,\r\n    };\r\n};\r\n"],"names":[],"mappings":";;;AACA;AACA;AAFA;AAAA;;;;AASA,MAAM,iBAAiB;IACnB,MAAM,WAAW,MAAM,4HAAA,CAAA,UAAa,CAAC,GAAG,CAAC,+BAA+B;QACpE,QAAQ;YAAE,OAAO;YAAI,MAAM;QAAE;QAC7B,SAAS;IACb;IACA,OAAO,SAAS,IAAI,CAAC,IAAI,IAAI,EAAE;AACnC;AAEO,MAAM,mBAAmB,CAAC,iBAAiB,KAAK;IACnD,MAAM,EAAE,UAAU,EAAE,GAAG,CAAA,GAAA,yIAAA,CAAA,UAAO,AAAD;IAC7B,MAAM,cAAc,CAAA,GAAA,sLAAA,CAAA,iBAAc,AAAD;IAEjC,MAAM,QAAQ,CAAA,GAAA,2KAAA,CAAA,WAAQ,AAAD,EAAE;QACnB,UAAU;YAAC;SAAY;QACvB,SAAS;QACT,SAAS,CAAC,CAAC;IACf;IAEA,MAAM,mBAAmB;QACrB,YAAY,iBAAiB,CAAC;YAAE,UAAU;gBAAC;aAAY;QAAC;IAC5D;IAEA,OAAO;QACH,GAAG,KAAK;QACR,WAAW,MAAM,IAAI,IAAI,EAAE;QAC3B;IACJ;AACJ"}},
    {"offset": {"line": 403, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 409, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ADMIN/camera-web/src/components/Sidebar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { AiOutlineDesktop } from \"react-icons/ai\";\r\nimport { FaChevronDown, FaChevronUp } from \"react-icons/fa\";\r\nimport Link from \"next/link\";\r\nimport { useHardwareQuery } from '@/hooks/useHardwareQuery'; // Import useHardwareQuery\r\n\r\nconst MENUS = {\r\n  HARDWARE: \"hardware\",\r\n};\r\n\r\nconst Sidebar = () => {\r\n  const [isHardwareOpen, setIsHardwareOpen] = useState(false);\r\n  const [activeMenu, setActiveMenu] = useState<string>(MENUS.HARDWARE);\r\n  const [activeStation, setActiveStation] = useState<number | null>(null);\r\n\r\n  const { data: hardwares = [], isLoading } = useHardwareQuery();\r\n\r\n  useEffect(() => {\r\n    if (hardwares.length > 0) {\r\n      setActiveStation(Number(hardwares[0].id)); \r\n    }\r\n  }, [hardwares]);\r\n\r\n  const toggleHardware = () => setIsHardwareOpen((prev) => !prev);\r\n\r\n  return (\r\n    <div className=\"w-72 h-full bg-white text-[#5D6679] flex flex-col shadow-lg\">\r\n      <div className=\"flex items-center justify-center p-6\">\r\n        <img\r\n          src=\"/logo.png\"\r\n          alt=\"Logo\"\r\n          className=\"h-12 w-auto object-contain\"\r\n        />\r\n      </div>\r\n\r\n      <ul className=\"flex-1 mt-8 space-y-3 px-6\">\r\n        <div\r\n          className={`flex items-center justify-between p-3 rounded-lg cursor-pointer transition-all ${\r\n            activeMenu === MENUS.HARDWARE\r\n              ? \"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-md\"\r\n              : \"hover:bg-gray-100 text-[#5D6679]\"\r\n          }`}\r\n          onClick={() => {\r\n            toggleHardware();\r\n            setActiveMenu(MENUS.HARDWARE);\r\n          }}\r\n        >\r\n          <div className=\"flex items-center gap-3 h-6\">\r\n            <AiOutlineDesktop size={20} />\r\n            <span className=\"text-sm font-medium\">Hardware</span>\r\n          </div>\r\n          {isHardwareOpen ? <FaChevronUp size={16} /> : <FaChevronDown size={16} />}\r\n        </div>\r\n\r\n        {isHardwareOpen && hardwares.length > 0 && (\r\n          <ul className=\"ml-6 mt-1 space-y-1\">\r\n            {hardwares.map((hardware) => (\r\n              <Link\r\n                href={`/authenticated/hardware/${hardware.id}`}\r\n                key={hardware.id}\r\n                className={`flex items-center gap-2 p-3 rounded-md cursor-pointer transition-all ${\r\n                  activeStation === Number(hardware.id)\r\n                    ? \"bg-blue-200 text-blue-600 font-medium\" \r\n                    : \"hover:bg-gray-200 text-[#5D6679]\"\r\n                }`}\r\n                onClick={() => setActiveStation(Number(hardware.id))}\r\n              >\r\n                <div\r\n                  className={`h-2 w-2 rounded-full ${\r\n                    activeStation === Number(hardware.id) ? \"bg-blue-600\" : \"bg-gray-500\"\r\n                  }`}\r\n                ></div>\r\n                <span className=\"text-xs font-medium\">{hardware.hardware_name}</span>\r\n              </Link>\r\n            ))}\r\n          </ul>\r\n        )}\r\n      </ul>\r\n\r\n      <div className=\"p-3 text-xs text-center text-[#5D6679] border-t border-gray-200\">\r\n        © 2025 FILS\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Sidebar;"],"names":[],"mappings":";;;;AAEA;AAGA;AACA,+NAA6D,0BAA0B;AAHvF;AACA;AAJA;;;;;;;AAQA,MAAM,QAAQ;IACZ,UAAU;AACZ;AAEA,MAAM,UAAU;IACd,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACrD,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU,MAAM,QAAQ;IACnE,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAElE,MAAM,EAAE,MAAM,YAAY,EAAE,EAAE,SAAS,EAAE,GAAG,CAAA,GAAA,gIAAA,CAAA,mBAAgB,AAAD;IAE3D,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,UAAU,MAAM,GAAG,GAAG;YACxB,iBAAiB,OAAO,SAAS,CAAC,EAAE,CAAC,EAAE;QACzC;IACF,GAAG;QAAC;KAAU;IAEd,MAAM,iBAAiB,IAAM,kBAAkB,CAAC,OAAS,CAAC;IAE1D,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBACC,KAAI;oBACJ,KAAI;oBACJ,WAAU;;;;;;;;;;;0BAId,8OAAC;gBAAG,WAAU;;kCACZ,8OAAC;wBACC,WAAW,CAAC,+EAA+E,EACzF,eAAe,MAAM,QAAQ,GACzB,oEACA,oCACJ;wBACF,SAAS;4BACP;4BACA,cAAc,MAAM,QAAQ;wBAC9B;;0CAEA,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,8IAAA,CAAA,mBAAgB;wCAAC,MAAM;;;;;;kDACxB,8OAAC;wCAAK,WAAU;kDAAsB;;;;;;;;;;;;4BAEvC,+BAAiB,8OAAC,8IAAA,CAAA,cAAW;gCAAC,MAAM;;;;;qDAAS,8OAAC,8IAAA,CAAA,gBAAa;gCAAC,MAAM;;;;;;;;;;;;oBAGpE,kBAAkB,UAAU,MAAM,GAAG,mBACpC,8OAAC;wBAAG,WAAU;kCACX,UAAU,GAAG,CAAC,CAAC,yBACd,8OAAC,4JAAA,CAAA,UAAI;gCACH,MAAM,CAAC,wBAAwB,EAAE,SAAS,EAAE,EAAE;gCAE9C,WAAW,CAAC,qEAAqE,EAC/E,kBAAkB,OAAO,SAAS,EAAE,IAChC,0CACA,oCACJ;gCACF,SAAS,IAAM,iBAAiB,OAAO,SAAS,EAAE;;kDAElD,8OAAC;wCACC,WAAW,CAAC,qBAAqB,EAC/B,kBAAkB,OAAO,SAAS,EAAE,IAAI,gBAAgB,eACxD;;;;;;kDAEJ,8OAAC;wCAAK,WAAU;kDAAuB,SAAS,aAAa;;;;;;;+BAbxD,SAAS,EAAE;;;;;;;;;;;;;;;;0BAoB1B,8OAAC;gBAAI,WAAU;0BAAkE;;;;;;;;;;;;AAKvF;uCAEe"}},
    {"offset": {"line": 568, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 574, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ADMIN/camera-web/src/utils/check_token.ts"],"sourcesContent":["import { jwtDecode } from 'jwt-decode';\r\n\r\ninterface Hardware {\r\n    id: string;\r\n}\r\n\r\nexport const checkToken = (\r\n    router: any,\r\n    hardwares: Hardware[] \r\n): boolean => {\r\n\r\n    const token = typeof window !== 'undefined' ? localStorage.getItem('token') : null;\r\n    if (!token || typeof token !== 'string') {\r\n        console.warn('Token không tồn tại hoặc không hợp lệ.');\r\n        router.push('/login');\r\n        return false;\r\n    }\r\n\r\n    try {\r\n        const decodedToken = jwtDecode(token);\r\n\r\n        if (!decodedToken.exp) {\r\n            console.warn('Token không có trường exp.');\r\n            localStorage.removeItem('token');\r\n            router.push('/login');\r\n            return false;\r\n        }\r\n\r\n        const expirationTime = decodedToken.exp * 1000;\r\n        const currentTime = Date.now();\r\n\r\n        if (currentTime >= expirationTime) {\r\n            console.warn('Token đã hết hạn.');\r\n            localStorage.removeItem('token');\r\n            router.push('/login');\r\n            return false;\r\n        }\r\n\r\n        if (hardwares && hardwares.length > 0) {\r\n            const firstHardwareId = hardwares[0].id;\r\n            router.replace(`/authenticated/hardware/${firstHardwareId}`);\r\n        } else {\r\n            router.replace('/');\r\n        }\r\n\r\n        return true;\r\n    } catch (error) {\r\n        console.error('Lỗi khi giải mã token:', error);\r\n        localStorage.removeItem('token');\r\n        router.push('/login');\r\n        return false;\r\n    }\r\n};"],"names":[],"mappings":";;;AAAA;;AAMO,MAAM,aAAa,CACtB,QACA;IAGA,MAAM,QAAQ,6EAAgE;IAC9E,wCAAyC;QACrC,QAAQ,IAAI,CAAC;QACb,OAAO,IAAI,CAAC;QACZ,OAAO;IACX;;AAoCJ"}},
    {"offset": {"line": 588, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 594, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ADMIN/camera-web/src/app/authenticated/layout.tsx"],"sourcesContent":["'use client'\nimport { useState, useEffect, useRef, useCallback, useMemo } from \"react\";\nimport dynamic from \"next/dynamic\";\nimport \"@/style/globals.css\";\nimport Loading from \"@/components/Loading\";\nimport clsx from \"clsx\";\nimport Header from \"@/components/Header\";\nimport Sidebar from \"@/components/Sidebar\";\nimport { useRouter } from \"next/navigation\";\nimport { checkToken } from \"@/utils/check_token\";\nimport { useHardwareQuery } from \"@/hooks/useHardwareQuery\";\n\nconst debounce = (func: Function, wait: number) => {\n  let timeout: NodeJS.Timeout;\n  return function (this: any, ...args: any[]) {\n    const context = this;\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func.apply(context, args), wait);\n  };\n};\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\n  const [isSmallScreen, setIsSmallScreen] = useState<boolean | null>(false);\n  const [loading, setLoading] = useState(false);\n  const [hydrated, setHydrated] = useState(false);\n  const touchStartX = useRef(0);\n  const router = useRouter();\n  const handleResize = useCallback(() => {\n    setIsSmallScreen(window.innerWidth < 640);\n  }, []);\n\n  const { hardwares, isLoading: isHardwareLoading } = useHardwareQuery(true);\n\n  useEffect(() => {\n    checkToken(router, hardwares);\n  }, [router, hardwares]);\n  useEffect(() => {\n    setHydrated(true);\n    handleResize();\n    const debouncedHandleResize = debounce(handleResize, 200);\n    window.addEventListener(\"resize\", debouncedHandleResize);\n    return () => {\n      window.removeEventListener(\"resize\", debouncedHandleResize);\n    };\n  }, [handleResize]);\n\n\n  const toggleSidebar = useCallback(() => {\n    setIsSidebarOpen((prev) => !prev);\n  }, []);\n\n  const handleTouchStart = useCallback((e: React.TouchEvent) => {\n    touchStartX.current = e.touches[0].clientX;\n  }, []);\n\n  const handleTouchMove = useCallback((e: TouchEvent) => {\n    const touchEndX = e.touches[0].clientX;\n    if (touchStartX.current - touchEndX > 100) {\n      setIsSidebarOpen(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (isSidebarOpen) {\n      document.addEventListener(\"touchmove\", handleTouchMove);\n    } else {\n      document.removeEventListener(\"touchmove\", handleTouchMove);\n    }\n    return () => {\n      document.removeEventListener(\"touchmove\", handleTouchMove);\n    };\n  }, [isSidebarOpen, handleTouchMove]);\n\n  const memoizedHeader = useMemo(() => (\n    <Header toggleSidebar={toggleSidebar} isSmallScreen={isSmallScreen ?? false} />\n  ), [toggleSidebar, isSmallScreen]);\n\n  const memoizedSidebar = useMemo(() => (\n    <Sidebar />\n  ), []);\n\n  if (!hydrated) return null;\n\n  return (\n    <div className=\"h-screen overflow-hidden\">\n      {loading ? (\n        <Loading />\n      ) : (\n        <div className=\"flex h-full relative\">\n          <div\n            aria-hidden={!isSidebarOpen}\n            className={clsx(\n              \"transform transition-all duration-300 ease-in-out z-50 fixed inset-0 sm:relative w-72 text-white\",\n              { hidden: isSmallScreen && !isSidebarOpen },\n              { block: isSmallScreen ? isSidebarOpen : true }\n            )}\n            onTouchStart={handleTouchStart}\n          >\n            {isSmallScreen !== null && memoizedSidebar}\n          </div>\n          <div className=\"flex-1 overflow-auto sm:ml-0 lg:ml-1 relative\">\n            {memoizedHeader}\n            <div className=\"p-4 sm:p-3 lg:p-8 mt-[60px]\">\n              {children}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 748, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}